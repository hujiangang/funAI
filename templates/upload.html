<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¸Šä¼ æ–°æ¸¸æˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>

<body class="bg-gray-900 text-white min-h-screen p-6">

    <div class="max-w-3xl mx-auto">
        <!-- é¡¶éƒ¨å¯¼èˆª -->
        <div class="flex items-center justify-between mb-8">
            <h1 class="text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-green-400 to-blue-500">
                ğŸ“¤ æäº¤ AI æ¸¸æˆ
            </h1>
            <a href="/" class="text-gray-400 hover:text-white transition">å–æ¶ˆå¹¶è¿”å›</a>
        </div>

        <!-- è¡¨å•åŒºåŸŸ -->
        <div class="bg-gray-800 rounded-xl p-8 shadow-2xl border border-gray-700">
            <form action="/upload" method="post" enctype="multipart/form-data" class="space-y-6">

                <!-- ç¬¬ä¸€è¡Œï¼šæ ‡é¢˜å’Œä½œè€… -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">æ¸¸æˆåç§°</label>
                        <input type="text" name="title" required placeholder="ä¾‹å¦‚ï¼šè¶…çº§è´ªåƒè›‡"
                            class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3 focus:ring-2 focus:ring-green-500 focus:outline-none">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">ä½œè€… / è´¡çŒ®è€…</label>
                        <input type="text" name="author" required placeholder="ä½ çš„åå­—"
                            class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3 focus:ring-2 focus:ring-green-500 focus:outline-none">
                    </div>
                </div>

                <!-- ç¬¬äºŒè¡Œï¼šAI æ¨¡å‹å’Œåˆ†ç±» -->
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">é€‰æ‹©æˆ–å¡«å†™ AI æ¨¡å‹</label>
                        <select name="ai_model" id="ai_model_select"
                            class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3 focus:ring-2 focus:ring-green-500 focus:outline-none">
                            <option value="DeepSeek-V3">DeepSeek-V3</option>
                            <option value="GPT-4o">GPT-4o</option>
                            <option value="Claude 3.5 Sonnet">Claude 3.5 Sonnet</option>
                            <option value="Gemini Pro">Gemini Pro</option>
                            <option value="å…¶ä»–">å…¶ä»–</option>
                        </select>
                        <!-- æ‰‹åŠ¨å¡«å†™ AI æ¨¡å‹åç§°çš„è¾“å…¥æ¡†ï¼Œé»˜è®¤éšè— -->
                        <div id="other_ai_model_container" class="mt-4 hidden">
                            <label class="block text-sm font-medium text-gray-400 mb-1">è¯·å¡«å†™å…·ä½“çš„ AI æ¨¡å‹åç§°</label>
                            <input type="text" name="custom_ai_model" id="custom_ai_model_input"
                                placeholder="ä¾‹å¦‚ï¼šBard, Llama 3, è‡ªå®šä¹‰æ¨¡å‹"
                                class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3 focus:ring-2 focus:ring-green-500 focus:outline-none">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-400 mb-1">æ¸¸æˆåˆ†ç±»</label>
                        <select name="category_id"
                            class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3 focus:ring-2 focus:ring-green-500 focus:outline-none">
                            {% for category in categories %}
                            <option value="{{ category.id }}">{{ category.name }}</option>
                            {% endfor %}
                        </select>
                    </div>
                </div>
                
                <!-- ç®€ä»‹ -->
                <div>
                    <label class="block text-sm font-medium text-gray-400 mb-1">ä¸€å¥è¯ç®€ä»‹</label>
                    <input type="text" name="description" placeholder="ç©æ³•ç®€å•ä»‹ç»..."
                        class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3 focus:ring-2 focus:ring-green-500 focus:outline-none">
                </div>

                <!-- æç¤ºè¯ (Prompt) -->
                <div>
                    <label class="block text-sm font-medium text-gray-400 mb-1">ä½¿ç”¨çš„æç¤ºè¯ (Prompt)</label>
                    <textarea name="prompt" rows="3" placeholder="åˆ†äº«ä½ æ˜¯æ€ä¹ˆè®© AI ç”Ÿæˆè¿™ä¸ªæ¸¸æˆçš„..."
                        class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3 focus:ring-2 focus:ring-green-500 focus:outline-none text-sm"></textarea>
                </div>

                <!-- ä¸Šä¼ æ–¹å¼é€‰æ‹© -->
                <div>
                    <label class="block text-sm font-medium text-gray-400 mb-3">ä¸Šä¼ æ–¹å¼</label>
                    <div class="flex gap-4 mb-4">
                        <button type="button" id="htmlModeBtn"
                            class="flex-1 py-3 px-4 rounded-lg border-2 border-green-500 bg-green-500/20 text-green-400 font-medium transition">
                            ğŸ“ ç²˜è´´ HTML ä»£ç 
                        </button>
                        <button type="button" id="zipModeBtn"
                            class="flex-1 py-3 px-4 rounded-lg border-2 border-gray-600 bg-transparent text-gray-400 font-medium transition hover:border-blue-500 hover:text-blue-400">
                            ğŸ“¦ ä¸Šä¼  ZIP æ–‡ä»¶
                        </button>
                    </div>
                </div>

                <!-- HTML ä»£ç æ¨¡å¼ -->
                <div id="htmlCodeSection">
                    <label class="block text-sm font-medium text-green-400 mb-1">HTML ä»£ç  (å®Œæ•´ç²˜è´´åˆ°è¿™é‡Œ)</label>
                    <textarea name="html_code" id="htmlCodeTextarea" rows="10" required placeholder="<!DOCTYPE html>..."
                        class="w-full bg-black border border-gray-600 rounded-lg p-4 font-mono text-xs text-green-400 focus:ring-2 focus:ring-green-500 focus:outline-none"></textarea>
                    <p class="text-xs text-gray-500 mt-2">* è¯·ç¡®ä¿ä»£ç åŒ…å« &lt;html&gt; å’Œ &lt;script&gt; æ ‡ç­¾</p>
                </div>

                <!-- ZIP æ–‡ä»¶æ¨¡å¼ -->
                <div id="zipFileSection" class="hidden">
                    <label class="block text-sm font-medium text-blue-400 mb-1">é€‰æ‹© ZIP æ–‡ä»¶</label>
                    <input type="file" name="zip_file" id="zipFileInput" accept=".zip"
                        class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3 text-gray-300 file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0 file:bg-blue-600 file:text-white hover:file:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:outline-none">
                    <div class="mt-3 p-4 bg-blue-900/20 border border-blue-700/50 rounded-lg">
                        <p class="text-sm text-blue-300 font-medium mb-2">ğŸ’¡ ZIP æ–‡ä»¶è¦æ±‚ï¼š</p>
                        <ul class="text-xs text-gray-400 space-y-1 ml-4 list-disc">
                            <li><strong>å·²æ„å»ºé¡¹ç›®</strong>ï¼šå¦‚æœæ˜¯ Vite/React ç­‰é¡¹ç›®ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è¿è¡Œ <code
                                    class="bg-gray-800 px-1 rounded">npm run build</code></li>
                            <li><strong>å¿…é¡»åŒ…å«</strong>ï¼š<code class="bg-gray-800 px-1 rounded">index.html</code>
                                æ–‡ä»¶ï¼ˆæˆ–æ„å»ºåç”Ÿæˆï¼‰</li>
                            <li><strong>èµ„æºæ–‡ä»¶</strong>ï¼šå¯åŒ…å« CSSã€JSã€å›¾ç‰‡ç­‰ï¼Œä½¿ç”¨ç›¸å¯¹è·¯å¾„å¼•ç”¨</li>
                            <li><strong>æºç é¡¹ç›®</strong>ï¼šåŒ…å« <code class="bg-gray-800 px-1 rounded">package.json</code>
                                çš„é¡¹ç›®ä¼šè‡ªåŠ¨æ„å»ºï¼ˆéœ€è¦5åˆ†é’Ÿå†…å®Œæˆï¼‰</li>
                        </ul>
                    </div>
                </div>

                <!-- ç¼–è¾‘å¯†ç ï¼ˆå¯é€‰ï¼‰ -->
                <div>
                    <label class="block text-sm font-medium text-gray-400 mb-1">ç¼–è¾‘å¯†ç ï¼ˆå¯é€‰ï¼‰</label>
                    <input type="password" name="edit_password" placeholder="è®¾ç½®åå¯ç”¨äºç¼–è¾‘æ­¤æ¸¸æˆ"
                        class="w-full bg-gray-900 border border-gray-700 rounded-lg p-3 focus:ring-2 focus:ring-green-500 focus:outline-none">
                    <p class="text-xs text-gray-500 mt-1">* ç•™ç©ºåˆ™æ— æ³•ç¼–è¾‘</p>
                </div>

                <!-- æäº¤æŒ‰é’® -->
                <button type="submit"
                    class="w-full bg-gradient-to-r from-green-500 to-blue-600 hover:from-green-600 hover:to-blue-700 text-white font-bold py-4 rounded-lg transition transform hover:scale-[1.01] shadow-lg">
                    ğŸš€ ç«‹å³å‘å¸ƒå¹¶è¯•ç©
                </button>
            </form>
        </div>
    </div>

    <script>
        // ä¸Šä¼ æ¨¡å¼åˆ‡æ¢
        const htmlModeBtn = document.getElementById('htmlModeBtn');
        const zipModeBtn = document.getElementById('zipModeBtn');
        const htmlCodeSection = document.getElementById('htmlCodeSection');
        const zipFileSection = document.getElementById('zipFileSection');
        const htmlCodeTextarea = document.getElementById('htmlCodeTextarea');
        const zipFileInput = document.getElementById('zipFileInput');

        function switchToHtmlMode() {
            // åˆ‡æ¢æŒ‰é’®æ ·å¼
            htmlModeBtn.classList.add('border-green-500', 'bg-green-500/20', 'text-green-400');
            htmlModeBtn.classList.remove('border-gray-600', 'bg-transparent', 'text-gray-400');
            zipModeBtn.classList.remove('border-blue-500', 'bg-blue-500/20', 'text-blue-400');
            zipModeBtn.classList.add('border-gray-600', 'bg-transparent', 'text-gray-400');

            // æ˜¾ç¤º/éšè—åŒºåŸŸ
            htmlCodeSection.classList.remove('hidden');
            zipFileSection.classList.add('hidden');

            // è®¾ç½® required å±æ€§
            htmlCodeTextarea.setAttribute('required', 'required');
            zipFileInput.removeAttribute('required');
            zipFileInput.value = ''; // æ¸…ç©ºæ–‡ä»¶é€‰æ‹©
        }

        function switchToZipMode() {
            // åˆ‡æ¢æŒ‰é’®æ ·å¼
            zipModeBtn.classList.add('border-blue-500', 'bg-blue-500/20', 'text-blue-400');
            zipModeBtn.classList.remove('border-gray-600', 'bg-transparent', 'text-gray-400');
            htmlModeBtn.classList.remove('border-green-500', 'bg-green-500/20', 'text-green-400');
            htmlModeBtn.classList.add('border-gray-600', 'bg-transparent', 'text-gray-400');

            // æ˜¾ç¤º/éšè—åŒºåŸŸ
            zipFileSection.classList.remove('hidden');
            htmlCodeSection.classList.add('hidden');

            // è®¾ç½® required å±æ€§
            zipFileInput.setAttribute('required', 'required');
            htmlCodeTextarea.removeAttribute('required');
            htmlCodeTextarea.value = ''; // æ¸…ç©ºä»£ç 
        }

        htmlModeBtn.addEventListener('click', switchToHtmlMode);
        zipModeBtn.addEventListener('click', switchToZipMode);

        // AI æ¨¡å‹é€‰æ‹©é€»è¾‘
        const aiModelSelect = document.getElementById('ai_model_select');
        const otherAiModelContainer = document.getElementById('other_ai_model_container');
        const customAiModelInput = document.getElementById('custom_ai_model_input');

        function toggleOtherAiModelInput() {
            if (aiModelSelect.value === 'å…¶ä»–') {
                otherAiModelContainer.classList.remove('hidden');
                customAiModelInput.setAttribute('required', 'required');
            } else {
                otherAiModelContainer.classList.add('hidden');
                customAiModelInput.removeAttribute('required');
                customAiModelInput.value = ''; // æ¸…ç©ºå€¼ï¼Œé¿å…æäº¤ä¸å¿…è¦çš„æ•°æ®
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥ä¸€æ¬¡ï¼Œä»¥é˜²ç”¨æˆ·åˆ·æ–°é¡µé¢æ—¶"å…¶ä»–"å·²è¢«é€‰ä¸­
        toggleOtherAiModelInput();

        // ç›‘å¬é€‰æ‹©æ¡†çš„å˜åŒ–
        aiModelSelect.addEventListener('change', toggleOtherAiModelInput);
    </script>
</body>

</html>