{% extends "base.html" %}

{% block title %}
    å…³äºæˆ‘ä»¬
{% endblock %}

{% block content %}
    <!-- å…³äºé¡µé¢å®¹å™¨ -->
    <div class="max-w-4xl mx-auto px-4 py-16">
        <!-- æ ‡é¢˜åŒºåŸŸ -->
        <div class="text-center mb-12">
            <h1 class="text-3xl font-bold mb-4 text-white">å…³äºAIæ¸¸æˆå®éªŒå®¤</h1>
            <p class="text-gray-400">æ¢ç´¢AIæŠ€æœ¯åœ¨æ¸¸æˆå¼€å‘ä¸­çš„æ— é™å¯èƒ½</p>
        </div>
        
        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <div class="space-y-10">
            <!-- è®¾è®¡åˆè¡· -->
            <div class="bg-gray-800 rounded-lg p-8 border border-gray-700 shadow">
                <h2 class="text-xl font-semibold mb-6 text-white">è®¾è®¡åˆè¡·</h2>
                <div class="text-gray-300 leading-relaxed space-y-4">
                    {{ about_config.purpose }}
                </div>
            </div>
            
            <!-- æ”¯æŒæˆ‘ä»¬ -->
            <div>
                <h2 class="text-xl font-semibold mb-8 text-center text-white">æ”¯æŒæˆ‘ä»¬</h2>
                
                <!-- ç‚¹èµæŒ‰é’® -->
                <div class="bg-gray-800 rounded-lg p-6 border border-gray-700 shadow max-w-md mx-auto">
                    <div class="text-center">
                        <h3 class="text-lg font-medium mb-4 text-white">ç‚¹èµæ”¯æŒ</h3>
                        <button id="like-button" class="bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-6 rounded-full transition-colors duration-200 flex items-center gap-2 justify-center mx-auto mb-3">
                            <span>ğŸ‘</span>
                            <span id="like-count">{{ like_count }}</span>
                        </button>
                        <p class="text-gray-400 text-sm">æ‚¨çš„ç‚¹èµæ˜¯æˆ‘ä»¬å‰è¿›çš„åŠ¨åŠ›ï¼</p>
                    </div>
                </div>
                
                <!-- æ‰“èµæŒ‰é’® -->
                {% if about_config.reward_enabled %}
                <div class="bg-gray-800 rounded-lg p-6 border border-gray-700 shadow max-w-md mx-auto mt-6">
                    <div class="text-center">
                        <h3 class="text-lg font-medium mb-4 text-white">æ‰“èµæ”¯æŒ</h3>
                        <button id="reward-button" class="bg-pink-600 hover:bg-pink-700 text-white font-medium py-2 px-6 rounded-full transition-colors duration-200 flex items-center gap-2 justify-center mx-auto mb-3">
                            <span>ğŸ’–</span>
                            <span>æ‰“èµ</span>
                        </button>
                        <p class="text-gray-400 text-sm">{{ about_config.reward_description }}</p>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
        
        <!-- é¡µè„šä¿¡æ¯ -->
        <div class="text-center mt-12 text-gray-500">
            <p>Â© 2025 AIæ¸¸æˆå®éªŒå®¤</p>
        </div>
        
        <!-- æ‰“èµå¼¹çª— -->
        <div id="reward-modal" class="fixed inset-0 bg-black bg-opacity-80 z-50 hidden items-center justify-center">
            <div class="bg-gray-800 rounded-lg p-8 max-w-md w-full mx-4 border border-gray-700 shadow">
                <div class="flex justify-between items-center mb-6">
                    <h3 class="text-xl font-semibold text-white">æ‰“èµæ”¯æŒ</h3>
                    <button id="close-reward-modal" class="text-gray-400 hover:text-white transition-colors">
                        Ã—
                    </button>
                </div>
                
                {% if about_config.reward_image_url %}
                <div class="mb-6">
                    <img src="{{ about_config.reward_image_url }}" alt="æ‰“èµäºŒç»´ç " class="max-w-full h-auto rounded mx-auto block">
                </div>
                {% else %}
                <div class="bg-gray-700 rounded p-4 mb-6 text-center">
                    <p class="text-gray-300">æš‚æ— æ‰“èµå›¾ç‰‡</p>
                </div>
                {% endif %}
                
                <div class="text-center mb-6">
                    <p class="text-gray-300">{{ about_config.reward_description }}</p>
                </div>
                
                <div class="flex justify-center">
                    <button id="confirm-reward" class="bg-purple-600 hover:bg-purple-700 text-white font-medium py-2 px-6 rounded-full transition-colors duration-200">
                        å…³é—­
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- JavaScript -->
    <script>
        // ç‚¹èµåŠŸèƒ½
        const likeButton = document.getElementById('like-button');
        const likeCount = document.getElementById('like-count');
        
        likeButton.addEventListener('click', async () => {
            try {
                const response = await fetch('/api/about/like', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });
                
                const data = await response.json();
                if (data.status === 'success') {
                    likeCount.textContent = data.like_count;
                    likeButton.innerHTML = '<span>ğŸ‰</span><span>' + data.like_count + '</span>';
                    likeButton.disabled = true;
                    likeButton.classList.add('opacity-50', 'cursor-not-allowed');
                } else {
                    alert(data.message);
                }
            } catch (error) {
                console.error('ç‚¹èµå¤±è´¥:', error);
                alert('ç‚¹èµå¤±è´¥ï¼Œè¯·ç¨åé‡è¯•');
            }
        });
        
        // æ‰“èµå¼¹çª—åŠŸèƒ½
        const rewardButton = document.getElementById('reward-button');
        const rewardModal = document.getElementById('reward-modal');
        const closeRewardModal = document.getElementById('close-reward-modal');
        const confirmReward = document.getElementById('confirm-reward');
        
        if (rewardButton) {
            rewardButton.addEventListener('click', () => {
                rewardModal.classList.remove('hidden');
                rewardModal.classList.add('flex');
            });
        }
        
        closeRewardModal.addEventListener('click', () => {
            rewardModal.classList.add('hidden');
            rewardModal.classList.remove('flex');
        });
        
        confirmReward.addEventListener('click', () => {
            rewardModal.classList.add('hidden');
            rewardModal.classList.remove('flex');
        });
        
        // ç‚¹å‡»å¼¹çª—å¤–éƒ¨å…³é—­å¼¹çª—
        rewardModal.addEventListener('click', (e) => {
            if (e.target === rewardModal) {
                rewardModal.classList.add('hidden');
                rewardModal.classList.remove('flex');
            }
        });
    </script>
{% endblock %}
